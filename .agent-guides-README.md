# Agent 가이드 문서 모음 (Agent Guide Collection)

이 폴더에는 Agent가 시행착오 없이 작업을 수행할 수 있도록 만든 가이드 문서들이 있습니다.

---

## 📚 가이드 문서 목록

### 1. 배포 관련

#### `.agent-deploy-guide.md` - 표준 배포 가이드
- **용도**: Debian 서버(100.118.226.70)에 Docker 프로젝트 배포
- **포함 내용**:
  - 프로젝트별 포트 및 네이밍 규칙
  - 배포 스크립트 템플릿 (`deploy_debian.bat`)
  - 외장하드 경로 사용 규칙
- **사용 시기**: 새 프로젝트를 Debian 서버에 배포할 때

### 2. CDN 적용 관련

#### `.agent-cdn-quick-start.md` - CDN 빠른 시작 가이드 ⭐ 추천
- **용도**: R2 CDN을 빠르게 적용 (3단계)
- **포함 내용**:
  - 자동화 스크립트 사용법
  - 3단계 빠른 적용 절차
  - Agent 작업 지시 예시
- **사용 시기**: 처음으로 CDN을 적용하거나 다른 서버에 적용할 때
- **실행 스크립트**: `apply_cdn_auto.py`

#### `.agent-cdn-setup-guide.md` - CDN 상세 설정 가이드
- **용도**: CDN 적용의 모든 세부사항 및 문제 해결
- **포함 내용**:
  - 단계별 상세 설명
  - 문제 해결 (Troubleshooting)
  - 수동 설정 방법
  - 검증 방법
- **사용 시기**: 
  - 자동화 스크립트가 실패했을 때
  - 특정 단계를 수동으로 수행해야 할 때
  - 문제 해결이 필요할 때

---

## 🚀 빠른 시작

### 새 프로젝트에 CDN 적용하기

```bash
# 1. 자동 설정 실행
python apply_cdn_auto.py

# 2. R2에 정적 파일 업로드
python r2_sync_tool.py

# 3. 서버 배포
# (프로젝트의 배포 스크립트 사용)

# 4. CDN 적용 확인
python verify_cdn.py
```

### Debian 서버에 배포하기

`.agent-deploy-guide.md` 파일의 배포 스크립트 템플릿을 사용하세요.

---

## 📝 Agent 작업 지시 예시

### CDN 적용 지시
```
".agent-cdn-quick-start.md 파일을 참고하여 이 프로젝트에 R2 CDN을 적용해줘.

현재 서버 정보:
- 프로젝트: audit
- 서버: OMV (192.168.0.30)
- R2_SERVER_PREFIX: omv2025
- 웹사이트 URL: https://audit.goal-runner.com

가이드의 3단계를 순서대로 수행하고, 각 단계 완료 후 결과를 보고해줘."
```

### 배포 지시
```
"표준 배포 가이드(.agent-deploy-guide.md)에 따라 Debian 서버(100.118.226.70)에 배포해줘.
특히 외장하드 경로(/srv/dev-disk-by-uuid-BE7AC6D67AC68A9B/docker/)를 사용하는지 꼭 확인해."
```

---

## 🛠️ 생성된 스크립트 파일

### `apply_cdn_auto.py`
- **기능**: CDN 적용을 자동화
- **수행 작업**:
  1. .env 파일 검증
  2. requirements.txt 업데이트
  3. settings.py에 R2 설정 추가
  4. 템플릿 파일에 {% load static %} 추가
  5. r2_sync_tool.py 생성
  6. verify_cdn.py 생성

### `r2_sync_tool.py`
- **기능**: 정적 파일을 R2에 업로드
- **업로드 대상**: static 폴더의 CSS, JS, 이미지 파일

### `verify_cdn.py`
- **기능**: CDN이 올바르게 적용되었는지 검증
- **확인 항목**:
  - 웹사이트 응답 상태
  - CDN 도메인 사용 여부
  - 정적 파일 로딩 경로

---

## 📋 체크리스트

### CDN 적용 전
- [ ] `.env` 파일에 R2 설정 확인
- [ ] `apply_cdn_auto.py` 실행
- [ ] `r2_sync_tool.py` 실행

### 배포 후
- [ ] `verify_cdn.py`로 CDN 확인
- [ ] 브라우저에서 웹사이트 정상 작동 확인
- [ ] 개발자 도구에서 정적 파일이 CDN에서 로드되는지 확인

---

## 🔗 관련 문서

- `.agent-deploy-guide.md` - 배포 가이드
- `.agent-cdn-quick-start.md` - CDN 빠른 시작
- `.agent-cdn-setup-guide.md` - CDN 상세 가이드

---

**작성일**: 2026-02-16  
**검증 완료**: NAS 서버 (map.goal-runner.com, nas2025)  
**다음 적용 대상**: OMV, Debian 서버
